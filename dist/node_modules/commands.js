'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = getCommands;

var _output = require('output');

var cliArg = _output.outputStyles.cliArg;
function getCommands(defaults) {
  var globalOptions = {
    'username': {
      alias: 'u',
      default: defaults.username || process.env.USER,
      describe: 'Username to use when connecting to deployment server'
    },
    'keyfile': {
      alias: 'k',
      default: defaults.keyfile,
      describe: 'Path to private key'
    },
    'server': {
      alias: 's',
      default: defaults.server,
      describe: 'Full server URL'
    },
    'debug': {
      type: 'boolean',
      default: defaults.debug || false,
      describe: 'Debug mode (enables -vvvv for playbooks, among other things)'
    }
  };

  var accountname = {
    alias: 'n',
    demand: true,
    describe: 'Account name'
  };

  var app = {
    alias: 'a',
    demand: true,
    describe: 'App identifier (e.g. deepsea, passerby, ...)'
  };

  var targets = {
    alias: 't',
    demand: true,
    array: true,
    describe: 'Space separated list of deployment targets (e.g. "--targets callisto titan")'
  };

  var commands = [{
    command: 'deploy',
    desc: 'deploy an application',
    usageStr: 'deploy -a ' + cliArg('appIdentifier') + ' -t ' + cliArg('target') + '[ ' + cliArg('target') + ' ...]',
    examples: [{ cli: 'deploy -a deepsea -t callisto', desc: 'Deploy app "deepsea" to target "callisto"' }, { cli: 'deploy -a passerby -t all -u some_user -k ~/.ssh/id_rsa.someuser --check', desc: 'Perform a mock-deployment of "passerby" to all available targets, connecting as user "some_user", using private key file "~/.ssh/id_rsa.someuser".' }],
    options: {
      app: app,
      targets: targets,
      'check': {
        alias: 'c',
        type: 'boolean',
        default: defaults.check,
        describe: "Perform check, don't change anything"
      },
      'no-pull': {
        alias: 'N',
        type: 'boolean',
        default: defaults.noPull || false,
        describe: 'Do not perform "git pull" on playbook repository before deployment'
      }
    }
  }, {
    command: 'user',
    desc: 'manage user accounts',
    usageStr: 'user -a action -n accountname -p /path/to/id_rsa.pub',
    examples: [{ cli: 'user -a create -n foo -p ~/.ssh/id_rsa.pub', desc: 'Creates an account named "foo", adding the pubkey located at ~/.ssh/id_rsa.pub to the list of accepted pubkeys.' }, { cli: 'user -a add-pubkey -n foo -p ~/.ssh/id_rsa.secondary.pub', desc: 'Adds the key located at ~/.ssh/id_rsa.secondary.pub to the list of accepted pubkeys for the user account "foo".' }, { cli: 'user -a remove-pubkey -n foo -p ~/.ssh/id_rsa.secondary.pub', desc: 'Removes the key located at ~/.ssh/id_rsa.secondary.pub from the list of accepted pubkeys for the user account "foo".' }, { cli: 'user -d remove -n foo', desc: 'Removes the user account "foo" and all associated pubkeys from the server.' }],
    options: {
      accountname: accountname,
      'action': {
        alias: 'a',
        demand: true,
        choices: ['create', 'add-pubkey', 'remove-pubkey', 'remove'],
        describe: 'Action to take'
      },
      'pubkey': {
        alias: 'p',
        describe: 'Path to public key file (required unless removing a user).'
      }
    }
  }, {
    command: 'user-list',
    desc: 'list user accounts',
    usageStr: 'user-list'
  }, {
    command: 'permission',
    desc: 'manage permissions',
    usageStr: 'permission -a appIdentifier -p permission -n username -t targets',
    examples: [{ cli: 'permission -n admin -a all -t all -p grant', desc: 'grant permission to deploy all apps on all targets to user admin' }],
    options: {
      accountname: accountname,
      app: app,
      targets: targets,
      'permission': {
        alias: 'p',
        demand: true,
        choices: ['grant', 'deny'],
        describe: 'grant or deny permission to deploy specified app to selected targets'
      }
    }
  }, {
    command: 'info',
    desc: 'Shows information about available apps, targets and permissions'
  }];

  return {
    globalOptions: globalOptions,
    commands: commands
  };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ub2RlX21vZHVsZXMvY29tbWFuZHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O2tCQU13Qjs7OztJQUZoQixpQkFGQyxhQUVEO0FBRU8sU0FBUyxXQUFULENBQXNCLFFBQXRCLEVBQWdDO0FBQzdDLE1BQU0sZ0JBQWdCO0FBQ3BCLGdCQUFZO0FBQ1YsYUFBTyxHQUFQO0FBQ0EsZUFBUyxTQUFTLFFBQVQsSUFBcUIsUUFBUSxHQUFSLENBQVksSUFBWjtBQUM5QixnQkFBVSxzREFBVjtLQUhGO0FBS0EsZUFBVztBQUNULGFBQU8sR0FBUDtBQUNBLGVBQVMsU0FBUyxPQUFUO0FBQ1QsZ0JBQVUscUJBQVY7S0FIRjtBQUtBLGNBQVU7QUFDUixhQUFPLEdBQVA7QUFDQSxlQUFTLFNBQVMsTUFBVDtBQUNULGdCQUFVLGlCQUFWO0tBSEY7QUFLQSxhQUFTO0FBQ1AsWUFBTSxTQUFOO0FBQ0EsZUFBUyxTQUFTLEtBQVQsSUFBa0IsS0FBbEI7QUFDVCxnQkFBVSw4REFBVjtLQUhGO0dBaEJJLENBRHVDOztBQXdCN0MsTUFBTSxjQUFjO0FBQ2xCLFdBQU8sR0FBUDtBQUNBLFlBQVEsSUFBUjtBQUNBLGNBQVUsY0FBVjtHQUhJLENBeEJ1Qzs7QUE4QjdDLE1BQU0sTUFBTTtBQUNWLFdBQU8sR0FBUDtBQUNBLFlBQVEsSUFBUjtBQUNBLGNBQVUsOENBQVY7R0FISSxDQTlCdUM7O0FBb0M3QyxNQUFNLFVBQVU7QUFDZCxXQUFPLEdBQVA7QUFDQSxZQUFRLElBQVI7QUFDQSxXQUFPLElBQVA7QUFDQSxjQUFVLDhFQUFWO0dBSkksQ0FwQ3VDOztBQTJDN0MsTUFBTSxXQUFXLENBQ2Y7QUFDRSxhQUFTLFFBQVQ7QUFDQSxVQUFNLHVCQUFOO0FBQ0EsNkJBQXVCLE9BQU8sZUFBUCxhQUE4QixPQUFPLFFBQVAsV0FBcUIsT0FBTyxRQUFQLFdBQTFFO0FBQ0EsY0FBVSxDQUNSLEVBQUUsS0FBSywrQkFBTCxFQUFzQyxNQUFNLDJDQUFOLEVBRGhDLEVBRVIsRUFBRSxLQUFLLDBFQUFMLEVBQWlGLE1BQU0sb0pBQU4sRUFGM0UsQ0FBVjtBQUlBLGFBQVM7QUFDUCxjQURPO0FBRVAsc0JBRk87QUFHUCxlQUFTO0FBQ1AsZUFBTyxHQUFQO0FBQ0EsY0FBTSxTQUFOO0FBQ0EsaUJBQVMsU0FBUyxLQUFUO0FBQ1Qsa0JBQVUsc0NBQVY7T0FKRjtBQU1BLGlCQUFXO0FBQ1QsZUFBTyxHQUFQO0FBQ0EsY0FBTSxTQUFOO0FBQ0EsaUJBQVMsU0FBUyxNQUFULElBQW1CLEtBQW5CO0FBQ1Qsa0JBQVUsb0VBQVY7T0FKRjtLQVRGO0dBVGEsRUEwQmY7QUFDRSxhQUFTLE1BQVQ7QUFDQSxVQUFNLHNCQUFOO0FBQ0EsY0FBVSxzREFBVjtBQUNBLGNBQVUsQ0FDUixFQUFFLEtBQUssNENBQUwsRUFBbUQsTUFBTSxpSEFBTixFQUQ3QyxFQUVSLEVBQUUsS0FBSywwREFBTCxFQUFpRSxNQUFNLGlIQUFOLEVBRjNELEVBR1IsRUFBRSxLQUFLLDZEQUFMLEVBQW9FLE1BQU0sc0hBQU4sRUFIOUQsRUFJUixFQUFFLEtBQUssdUJBQUwsRUFBOEIsTUFBTSw0RUFBTixFQUp4QixDQUFWO0FBTUEsYUFBUztBQUNQLDhCQURPO0FBRVAsZ0JBQVU7QUFDUixlQUFPLEdBQVA7QUFDQSxnQkFBUSxJQUFSO0FBQ0EsaUJBQVMsQ0FBRSxRQUFGLEVBQVksWUFBWixFQUEwQixlQUExQixFQUEyQyxRQUEzQyxDQUFUO0FBQ0Esa0JBQVUsZ0JBQVY7T0FKRjtBQU1BLGdCQUFVO0FBQ1IsZUFBTyxHQUFQO0FBQ0Esa0JBQVUsNERBQVY7T0FGRjtLQVJGO0dBcENhLEVBa0RmO0FBQ0UsYUFBUyxXQUFUO0FBQ0EsVUFBTSxvQkFBTjtBQUNBLGNBQVUsV0FBVjtHQXJEYSxFQXVEZjtBQUNFLGFBQVMsWUFBVDtBQUNBLFVBQU0sb0JBQU47QUFDQSxjQUFVLGtFQUFWO0FBQ0EsY0FBVSxDQUNSLEVBQUUsS0FBSyw0Q0FBTCxFQUFtRCxNQUFNLGtFQUFOLEVBRDdDLENBQVY7QUFHQSxhQUFTO0FBQ1AsOEJBRE87QUFFUCxjQUZPO0FBR1Asc0JBSE87QUFJUCxvQkFBYztBQUNaLGVBQU8sR0FBUDtBQUNBLGdCQUFRLElBQVI7QUFDQSxpQkFBUyxDQUFFLE9BQUYsRUFBVyxNQUFYLENBQVQ7QUFDQSxrQkFBVSxzRUFBVjtPQUpGO0tBSkY7R0E5RGEsRUEwRWY7QUFDRSxhQUFTLE1BQVQ7QUFDQSxVQUFNLGlFQUFOO0dBNUVhLENBQVgsQ0EzQ3VDOztBQTJIN0MsU0FBTztBQUNMLGdDQURLO0FBRUwsc0JBRks7R0FBUCxDQTNINkM7Q0FBaEMiLCJmaWxlIjoiY29tbWFuZHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcblxuaW1wb3J0IHsgb3V0cHV0U3R5bGVzIH0gZnJvbSAnb3V0cHV0J1xuXG5jb25zdCB7IGNsaUFyZyB9ID0gb3V0cHV0U3R5bGVzXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENvbW1hbmRzIChkZWZhdWx0cykge1xuICBjb25zdCBnbG9iYWxPcHRpb25zID0ge1xuICAgICd1c2VybmFtZSc6IHtcbiAgICAgIGFsaWFzOiAndScsXG4gICAgICBkZWZhdWx0OiBkZWZhdWx0cy51c2VybmFtZSB8fCBwcm9jZXNzLmVudi5VU0VSLFxuICAgICAgZGVzY3JpYmU6ICdVc2VybmFtZSB0byB1c2Ugd2hlbiBjb25uZWN0aW5nIHRvIGRlcGxveW1lbnQgc2VydmVyJ1xuICAgIH0sXG4gICAgJ2tleWZpbGUnOiB7XG4gICAgICBhbGlhczogJ2snLFxuICAgICAgZGVmYXVsdDogZGVmYXVsdHMua2V5ZmlsZSxcbiAgICAgIGRlc2NyaWJlOiAnUGF0aCB0byBwcml2YXRlIGtleSdcbiAgICB9LFxuICAgICdzZXJ2ZXInOiB7XG4gICAgICBhbGlhczogJ3MnLFxuICAgICAgZGVmYXVsdDogZGVmYXVsdHMuc2VydmVyLFxuICAgICAgZGVzY3JpYmU6ICdGdWxsIHNlcnZlciBVUkwnXG4gICAgfSxcbiAgICAnZGVidWcnOiB7XG4gICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICBkZWZhdWx0OiBkZWZhdWx0cy5kZWJ1ZyB8fCBmYWxzZSxcbiAgICAgIGRlc2NyaWJlOiAnRGVidWcgbW9kZSAoZW5hYmxlcyAtdnZ2diBmb3IgcGxheWJvb2tzLCBhbW9uZyBvdGhlciB0aGluZ3MpJ1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGFjY291bnRuYW1lID0ge1xuICAgIGFsaWFzOiAnbicsXG4gICAgZGVtYW5kOiB0cnVlLFxuICAgIGRlc2NyaWJlOiAnQWNjb3VudCBuYW1lJ1xuICB9XG5cbiAgY29uc3QgYXBwID0ge1xuICAgIGFsaWFzOiAnYScsXG4gICAgZGVtYW5kOiB0cnVlLFxuICAgIGRlc2NyaWJlOiAnQXBwIGlkZW50aWZpZXIgKGUuZy4gZGVlcHNlYSwgcGFzc2VyYnksIC4uLiknXG4gIH1cblxuICBjb25zdCB0YXJnZXRzID0ge1xuICAgIGFsaWFzOiAndCcsXG4gICAgZGVtYW5kOiB0cnVlLFxuICAgIGFycmF5OiB0cnVlLFxuICAgIGRlc2NyaWJlOiAnU3BhY2Ugc2VwYXJhdGVkIGxpc3Qgb2YgZGVwbG95bWVudCB0YXJnZXRzIChlLmcuIFwiLS10YXJnZXRzIGNhbGxpc3RvIHRpdGFuXCIpJ1xuICB9XG5cbiAgY29uc3QgY29tbWFuZHMgPSBbXG4gICAge1xuICAgICAgY29tbWFuZDogJ2RlcGxveScsXG4gICAgICBkZXNjOiAnZGVwbG95IGFuIGFwcGxpY2F0aW9uJyxcbiAgICAgIHVzYWdlU3RyOiBgZGVwbG95IC1hICR7Y2xpQXJnKCdhcHBJZGVudGlmaWVyJyl9IC10ICR7Y2xpQXJnKCd0YXJnZXQnKX1bICR7Y2xpQXJnKCd0YXJnZXQnKX0gLi4uXWAsXG4gICAgICBleGFtcGxlczogW1xuICAgICAgICB7IGNsaTogJ2RlcGxveSAtYSBkZWVwc2VhIC10IGNhbGxpc3RvJywgZGVzYzogJ0RlcGxveSBhcHAgXCJkZWVwc2VhXCIgdG8gdGFyZ2V0IFwiY2FsbGlzdG9cIicgfSxcbiAgICAgICAgeyBjbGk6ICdkZXBsb3kgLWEgcGFzc2VyYnkgLXQgYWxsIC11IHNvbWVfdXNlciAtayB+Ly5zc2gvaWRfcnNhLnNvbWV1c2VyIC0tY2hlY2snLCBkZXNjOiAnUGVyZm9ybSBhIG1vY2stZGVwbG95bWVudCBvZiBcInBhc3NlcmJ5XCIgdG8gYWxsIGF2YWlsYWJsZSB0YXJnZXRzLCBjb25uZWN0aW5nIGFzIHVzZXIgXCJzb21lX3VzZXJcIiwgdXNpbmcgcHJpdmF0ZSBrZXkgZmlsZSBcIn4vLnNzaC9pZF9yc2Euc29tZXVzZXJcIi4nIH1cbiAgICAgIF0sXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGFwcCxcbiAgICAgICAgdGFyZ2V0cyxcbiAgICAgICAgJ2NoZWNrJzoge1xuICAgICAgICAgIGFsaWFzOiAnYycsXG4gICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRzLmNoZWNrLFxuICAgICAgICAgIGRlc2NyaWJlOiBcIlBlcmZvcm0gY2hlY2ssIGRvbid0IGNoYW5nZSBhbnl0aGluZ1wiXG4gICAgICAgIH0sXG4gICAgICAgICduby1wdWxsJzoge1xuICAgICAgICAgIGFsaWFzOiAnTicsXG4gICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRzLm5vUHVsbCB8fCBmYWxzZSxcbiAgICAgICAgICBkZXNjcmliZTogJ0RvIG5vdCBwZXJmb3JtIFwiZ2l0IHB1bGxcIiBvbiBwbGF5Ym9vayByZXBvc2l0b3J5IGJlZm9yZSBkZXBsb3ltZW50J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBjb21tYW5kOiAndXNlcicsXG4gICAgICBkZXNjOiAnbWFuYWdlIHVzZXIgYWNjb3VudHMnLFxuICAgICAgdXNhZ2VTdHI6ICd1c2VyIC1hIGFjdGlvbiAtbiBhY2NvdW50bmFtZSAtcCAvcGF0aC90by9pZF9yc2EucHViJyxcbiAgICAgIGV4YW1wbGVzOiBbXG4gICAgICAgIHsgY2xpOiAndXNlciAtYSBjcmVhdGUgLW4gZm9vIC1wIH4vLnNzaC9pZF9yc2EucHViJywgZGVzYzogJ0NyZWF0ZXMgYW4gYWNjb3VudCBuYW1lZCBcImZvb1wiLCBhZGRpbmcgdGhlIHB1YmtleSBsb2NhdGVkIGF0IH4vLnNzaC9pZF9yc2EucHViIHRvIHRoZSBsaXN0IG9mIGFjY2VwdGVkIHB1YmtleXMuJyB9LFxuICAgICAgICB7IGNsaTogJ3VzZXIgLWEgYWRkLXB1YmtleSAtbiBmb28gLXAgfi8uc3NoL2lkX3JzYS5zZWNvbmRhcnkucHViJywgZGVzYzogJ0FkZHMgdGhlIGtleSBsb2NhdGVkIGF0IH4vLnNzaC9pZF9yc2Euc2Vjb25kYXJ5LnB1YiB0byB0aGUgbGlzdCBvZiBhY2NlcHRlZCBwdWJrZXlzIGZvciB0aGUgdXNlciBhY2NvdW50IFwiZm9vXCIuJyB9LFxuICAgICAgICB7IGNsaTogJ3VzZXIgLWEgcmVtb3ZlLXB1YmtleSAtbiBmb28gLXAgfi8uc3NoL2lkX3JzYS5zZWNvbmRhcnkucHViJywgZGVzYzogJ1JlbW92ZXMgdGhlIGtleSBsb2NhdGVkIGF0IH4vLnNzaC9pZF9yc2Euc2Vjb25kYXJ5LnB1YiBmcm9tIHRoZSBsaXN0IG9mIGFjY2VwdGVkIHB1YmtleXMgZm9yIHRoZSB1c2VyIGFjY291bnQgXCJmb29cIi4nIH0sXG4gICAgICAgIHsgY2xpOiAndXNlciAtZCByZW1vdmUgLW4gZm9vJywgZGVzYzogJ1JlbW92ZXMgdGhlIHVzZXIgYWNjb3VudCBcImZvb1wiIGFuZCBhbGwgYXNzb2NpYXRlZCBwdWJrZXlzIGZyb20gdGhlIHNlcnZlci4nIH1cbiAgICAgIF0sXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGFjY291bnRuYW1lLFxuICAgICAgICAnYWN0aW9uJzoge1xuICAgICAgICAgIGFsaWFzOiAnYScsXG4gICAgICAgICAgZGVtYW5kOiB0cnVlLFxuICAgICAgICAgIGNob2ljZXM6IFsgJ2NyZWF0ZScsICdhZGQtcHVia2V5JywgJ3JlbW92ZS1wdWJrZXknLCAncmVtb3ZlJyBdLFxuICAgICAgICAgIGRlc2NyaWJlOiAnQWN0aW9uIHRvIHRha2UnXG4gICAgICAgIH0sXG4gICAgICAgICdwdWJrZXknOiB7XG4gICAgICAgICAgYWxpYXM6ICdwJyxcbiAgICAgICAgICBkZXNjcmliZTogJ1BhdGggdG8gcHVibGljIGtleSBmaWxlIChyZXF1aXJlZCB1bmxlc3MgcmVtb3ZpbmcgYSB1c2VyKS4nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIGNvbW1hbmQ6ICd1c2VyLWxpc3QnLFxuICAgICAgZGVzYzogJ2xpc3QgdXNlciBhY2NvdW50cycsXG4gICAgICB1c2FnZVN0cjogJ3VzZXItbGlzdCdcbiAgICB9LFxuICAgIHtcbiAgICAgIGNvbW1hbmQ6ICdwZXJtaXNzaW9uJyxcbiAgICAgIGRlc2M6ICdtYW5hZ2UgcGVybWlzc2lvbnMnLFxuICAgICAgdXNhZ2VTdHI6ICdwZXJtaXNzaW9uIC1hIGFwcElkZW50aWZpZXIgLXAgcGVybWlzc2lvbiAtbiB1c2VybmFtZSAtdCB0YXJnZXRzJyxcbiAgICAgIGV4YW1wbGVzOiBbXG4gICAgICAgIHsgY2xpOiAncGVybWlzc2lvbiAtbiBhZG1pbiAtYSBhbGwgLXQgYWxsIC1wIGdyYW50JywgZGVzYzogJ2dyYW50IHBlcm1pc3Npb24gdG8gZGVwbG95IGFsbCBhcHBzIG9uIGFsbCB0YXJnZXRzIHRvIHVzZXIgYWRtaW4nIH1cbiAgICAgIF0sXG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGFjY291bnRuYW1lLFxuICAgICAgICBhcHAsXG4gICAgICAgIHRhcmdldHMsXG4gICAgICAgICdwZXJtaXNzaW9uJzoge1xuICAgICAgICAgIGFsaWFzOiAncCcsXG4gICAgICAgICAgZGVtYW5kOiB0cnVlLFxuICAgICAgICAgIGNob2ljZXM6IFsgJ2dyYW50JywgJ2RlbnknIF0sXG4gICAgICAgICAgZGVzY3JpYmU6ICdncmFudCBvciBkZW55IHBlcm1pc3Npb24gdG8gZGVwbG95IHNwZWNpZmllZCBhcHAgdG8gc2VsZWN0ZWQgdGFyZ2V0cydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgY29tbWFuZDogJ2luZm8nLFxuICAgICAgZGVzYzogJ1Nob3dzIGluZm9ybWF0aW9uIGFib3V0IGF2YWlsYWJsZSBhcHBzLCB0YXJnZXRzIGFuZCBwZXJtaXNzaW9ucydcbiAgICB9XG4gIF1cblxuICByZXR1cm4ge1xuICAgIGdsb2JhbE9wdGlvbnMsXG4gICAgY29tbWFuZHNcbiAgfVxufVxuIl19